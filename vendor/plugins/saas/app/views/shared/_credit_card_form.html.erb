<% if @creditcard.errors.any? %>
  <div class="errorExplanation">
    <h2>Errors encountered with your payment information:</h2>
    <ul>
      <%= raw(@creditcard.errors.full_messages.map {|m| content_tag(:li, h(m))}) %>
    </ul>
  </div>
<% end %>

<% if @address.errors.any? %>
  <div class="errorExplanation">
    <h2>Errors encountered with your address:</h2>
    <ul>
      <%= raw(@address.errors.full_messages.map {|m| content_tag(:li, h(m))}) %>
    </ul>
  </div>
<% end %>

<% if @subscription && @subscription.errors.any? %>
  <div class="errorExplanation">
    <h2>Errors encountered with your payment:</h2>
    <ul>
      <%= raw(@subscription.errors.full_messages.map {|m| content_tag(:li, h(m))}) %>
    </ul>
  </div>
<% end %>

<% if @subscription %>
<!--
  <fieldset>
    <h3>
      <input type="radio" name="paypal" value=" " id="pay_with_card" <%= 'checked="checked"' unless @subscription.paypal? %>>
      <label for="pay_with_card">Pay with a credit card</label>
    </h3>

    <div class="field string">
      <label>Name on Card</label>
      <%= text_field :creditcard, :first_name, :size => 20 %>
      <%= text_field :creditcard, :last_name, :size => 20 %>
    </div>

    <div class="field string">
      <label>Card Number</label>
      <%= text_field :creditcard, :number, :size => 20 %>
    </div>

    <div class="field select">
      <label>Type</label>
      <%= select :creditcard, :type, Saas::Config.gateway == "bogus" ? [['Bogus', 'bogus']] : [['Visa', 'visa'], ['MasterCard', 'master'], ['American Express', 'american_express']] %>
    </div>

    <div class="field select">
      <label>Expiration</label>
      <%= select :creditcard, :month, (1 .. 12) %>
      <%= select :creditcard, :year, (Time.now.year .. 10.years.from_now.year) %>
    </div>

    <div class="field string">
      <label>CVV</label>
      <%= text_field :creditcard, :verification_value, :size => 4 %>
      <%= image_tag('cvv.gif', :size => '51x31', :align => 'top') %>
    </div>

    <div class="field string">
      <label>Address</label>
      <%= text_field :address, :address1 %><br/>
      <%= text_field :address, :address2 %>
    </div>

    <div class="field string">
      <label>City</label>
      <%= text_field :address, :city %>
    </div>

    <div class="field string">
      <label>State</label>
      <%= text_field :address, :state %>
    </div>

    <div class="field string">
      <label>Zip</label>
      <%= text_field :address, :zip %>
    </div>

    <div class="field select">
      <label>Country</label>
      <%= country_select :address, :country, ['United States', 'Canada'] %>
    </div>

    <div class="field string">
      <label>Phone</label>
      <%= text_field :address ,:phone %>
    </div>
  </fieldset>
-->
  <fieldset class="pay_with_paypal">
    <h3>
      <input type="radio" name="paypal" value="true" id="pay_with_paypal" checked="checked">
      <label for="pay_with_paypal">Pay with PayPal</label>
    </h3>
  </fieldset>
<% end %>
